var status = 0;
var choice;
var itemxh=new Array("5510000","2050004","2000000","2000001","2000002","2000003","2000004","2000005","2000006","2000007","2000008","2000009","2000010","2000011","2000012","2000013","2000014","2000015","2000016","2000017","2000018","2000019","2000020","2000021","2000022","2000023","2000024","2000025","2000026","2000027","2000028","2000029","2001000","2001001","2001002","2001500","2001501","2001502","2001503","2001504","2001505","2001506","2001507","2001508","2001509","2001510","2001511","2001512","2001513","2001514","2001515","2001516","2001517","2001518","2001519","2001520","2001521","2001522","2001523","2001524","2001525","2001526","2001527","2001528","2001529","2001530","2001531","2001532","2001533","2001534","2001535","2001536","2001537","2001538","2001539","2001540","2001541","2001542","2001543","2001544","2001545","2001546","2001547","2001548","2001549","2002000","2002001","2002002","2002003","2002004","2002005","2002006","2002007","2002008","2002009","2002010","2002011","2002015","2002023","2002024","2002025","2002030","2002031","2002032","2002033","2002034","2002035","2002036","2002037","2002039","2002040","2002041","2002042","2002043","2002044","2002045","2002046","2002047","2002048","2002049","2002050","2002051","2002052","2002053","2002054","2002057","2002058","2002078","2002079","2002080","2002081","2002082","2002083","2002084","2003000","2003001","2003002","2003003","2003004","2003005","2003006","2003007","2003008","2003009","2003010","2003011","2003012","2003013","2003014","2003015","2003016","2003017","2003018","2003019","2003020","2003021","2003022","2003023","2003024","2003025","2003026","2003027","2003028","2003029","2003030","2003031","2003032","2003033","2003034","2003035","2003036","2003037","2003038","2003039","2003040","2003041","2003042","2003043","2003044","2003045","2003520","2003566","2003568","2003569","2003577","2003578","2003579","2003580","2003581","2003582","2003583","2003584","2003585","2003586","2003587","2003588","2003589","2004000","2004001","2004002","2004003","2004004","2004005","2004006","2004007","2004008","2004009","2004010","2004011","2004012","2004013","2004014","2004015","2004016","2004017","2004018","2004019","2004020","2004021","2004022","2004023","2004024","2004025","2004026","2004027","2004028","2004029","2004030","2004031","2004032","2004033","2004034","2004035","2004036","2004037","2004038","2004039","2004040","2004041","2004042","2004043","2004044","2004045","2004046","2004047","2004048","2004049","2004050","2004051","2004052","2004053","2004054","2004055","2004056","2004057","2004058","2004059","2004060","2004061","2004062","2004063","2004064","2004065","2004066","2004067","2004068","2004069","2004070","2004071","2004072","2004073","2004074","2004075","2004076","2004077","2004078","2004079","2004080","2004081","2004082","2004083","2004084","2004085","2004086","2004087","2004088","2004089","2004090","2004091","2004092","2004093","2004094","2004095","2004096","2004097","2004098","2004099","2004100","2004101","2004102","2004103","2004104","2004105","2004106","2004107","2004108","2004109","2004110","2004111","2004112","2004113","2004114","2004115","2004116","2004117","2004118","2004119","2004120","2004121","2004122","2004123","2004124","2004125","2004126","2004127","2004128","2004129","2004130","2004131","2004132","2004133","2004134","2004135","2004136","2004137","2004138","2004139","2004140","2004141","2004142","2004143","2004144","2004145","2004146","2004147","2004148","2004149","2004150","2004151","2004152","2004153","2004154","2004155","2004156","2004157","2004158","2004159","2004160","2004161","2004162","2004163","2004164","2004165","2004166","2004167","2004168","2004169","2004170","2004171","2004172","2004173","2004174","2004175","2004176","2004177","2004178","2004179","2004180","2004181","2004182","2004183","2004184","2004185","2004186","2004187","2004188","2004189","2004190","2004191","2004192","2004193","2004194","2004195","2004196","2004197","2004198","2004199","2004200","2004201","2004202","2004203","2004204","2004205","2004206","2004207","2004208","2004209","2004210","2004211","2004212","2004213","2004214","2004215","2004216","2004217","2004218","2004219","2004220","2004221","2004222","2004223","2004224","2004225","2004226","2004227","2004228","2004229","2004230","2004231","2004232","2004233","2004234","2004235","2004236","2004237","2004238","2004239","2004240","2004241","2022704");
var itemxhcost=new Array("0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0");

function start() {
    status = -1;
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == -1) cm.dispose();
    else {
        if (status == 0 && mode == 0) {
            cm.dispose();
            return;
        } else if (status >= 1 && mode == 0) {
            cm.sendOk("好吧，歡迎下次繼續光臨！.");
            cm.dispose();
            return;
        }
        if (mode == 1) status++;
        else status--;

        if (status == 0) {
            choices = "\r\n兔兔幣餘額：#r" + cm.getHyPay(1) + "#k兔兔幣 (#r買後不支持退貨喲親#k)";
            for (var i = 0; i < itemxh.length; i++) {
                choices += "\r\n#L" + i + "##v" + itemxh[i] + "##z" + itemxh[i] + "#　#d需要#r" + itemxhcost[i] + "#d兔兔幣#k#l";
            }
            cm.sendSimpleS("歡迎來到時尚補品店,你想買我們商店的物品麼?請選擇吧：." + choices,2);
        } else if (status == 1) {
                cm.sendGetNumber("你選擇的商品為#v" + itemxh[selection] + "#售價為：" + itemxhcost[selection] + "兔兔幣/個\r\n請輸入你購買的數量",1,1,cm.getHyPay(1));
        choice = selection;
        } else if (status == 2) {
            fee = selection;
            money = fee*itemxhcost[choice];
            if (fee < 0) {
            cm.sendOk("你輸入的數負數!");
            cm.dispose();
            } else if (cm.getHyPay(1) < money) {
            cm.sendOk("兌換失敗，你沒有" + money + "個兔兔幣");
            cm.dispose();
            } else {
        cm.addHyPay(money);
            cm.gainItem(itemxh[choice], fee); //聖盃
            cm.sendOk("恭喜，購買成功。");
            cm.dispose();
                }
        }
    }
}